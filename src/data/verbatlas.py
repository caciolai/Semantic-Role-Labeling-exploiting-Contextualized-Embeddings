from typing import *

import os
import pathlib
import urllib
import zipfile


model_folder_path = "../../model"
embeddings_folder = os.path.join(model_folder_path, "embeddings")
verbatlas_folder = os.path.join(embeddings_folder, "VerbAtlas-1.0.2")

def download_varbatlas():
    url = 'http://verbatlas.org/downloads/VerbAtlas-1.0.2.zip'
    filehandle, _ = urllib.request.urlretrieve(url)
    
    pathlib.Path(verbatlas_folder).mkdir(parents=True, exist_ok=True)
    
    with zipfile.ZipFile(filehandle, 'r') as zipObj:
        zipObj.extractall(verbatlas_folder)

def get_verbatlas_roles_path() -> str:
    va_roles_ids_path = os.path.join(verbatlas_folder, "VA_va2pas.tsv")

    if not os.path.isfile(va_roles_ids_path):
        download_varbatlas()
    
    return va_roles_ids_path

def get_verbatlas_predicate_ids_path() -> str:
    va_predicate_ids_path  = os.path.join(verbatlas_folder, "VA_frame_ids.tsv")

    if not os.path.isfile(va_predicate_ids_path):
        download_varbatlas()
    
    return va_predicate_ids_path 